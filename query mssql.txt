CREATE TABLE [dbo].[Artykuly] (
    [idArtykulu]  INT            IDENTITY (1, 1) NOT NULL,
    [Nazwa]       VARCHAR (45)   NOT NULL,
    [Ilosc]       INT            NOT NULL,
    [Cena]        DECIMAL (8, 2) NOT NULL,
    [idKategorii] INT            NOT NULL,
    CONSTRAINT [PK_Artykuly] PRIMARY KEY CLUSTERED ([idArtykulu] ASC),
    CONSTRAINT [FK_Artykuly_To_Kategorie] FOREIGN KEY ([idKategorii]) REFERENCES [dbo].[Kategorie] ([idKategorii])
);

CREATE TABLE [dbo].[Artykuly_w_transakcji] (
    [idArt_w_trans] INT            IDENTITY (1, 1) NOT NULL,
    [Cena]          DECIMAL (8, 2) NOT NULL,
    [idTransakcji]  INT            NOT NULL,
    [idArtykulu]    INT            NOT NULL,
    CONSTRAINT [PK_Artykuly_w_transakcji] PRIMARY KEY CLUSTERED ([idArt_w_trans] ASC),
    CONSTRAINT [FK_Artykuly_w_transakcji_To_Artykuly] FOREIGN KEY ([idArtykulu]) REFERENCES [dbo].[Artykuly] ([idArtykulu]),
    CONSTRAINT [FK_Artykuly_w_transakcji_To_Transakcje] FOREIGN KEY ([idTransakcji]) REFERENCES [dbo].[Transakcje] ([idTransakcji])
);

CREATE TABLE [dbo].[Dostawcy] (
    [idDostawcy] INT          IDENTITY (1, 1) NOT NULL,
    [Nazwa]      VARCHAR (45) NOT NULL,
    CONSTRAINT [PK_Dostawcy] PRIMARY KEY CLUSTERED ([idDostawcy] ASC)
);

CREATE TABLE [dbo].[Kategorie] (
    [idKategorii] INT          IDENTITY (1, 1) NOT NULL,
    [Nazwa]       VARCHAR (45) NOT NULL,
    CONSTRAINT [PK_Kategorie] PRIMARY KEY CLUSTERED ([idKategorii] ASC)
);

CREATE TABLE [dbo].[Klienci] (
    [idKlienta]   INT          IDENTITY (1, 1) NOT NULL,
    [Nazwisko]    VARCHAR (45) NOT NULL,
    [Imie]        VARCHAR (45) NOT NULL,
    [Nazwa_firmy] VARCHAR (45) NOT NULL,
    [idAdresu]    INT          NOT NULL,
    CONSTRAINT [PK_Klienci] PRIMARY KEY CLUSTERED ([idKlienta] ASC),
    CONSTRAINT [FK_Klienci_To_Ksiazka_adresow] FOREIGN KEY ([idAdresu]) REFERENCES [dbo].[Ksiazka_adresow] ([idAdresu])
);

CREATE TABLE [dbo].[Ksiazka_adresow] (
    [idAdresu]     INT          IDENTITY (1, 1) NOT NULL,
    [Miejscowosc]  VARCHAR (45) NOT NULL,
    [Kod_pocztowy] VARCHAR (45) NOT NULL,
    [Wojewodztwo]  VARCHAR (45) NOT NULL,
    CONSTRAINT [PK_Ksiazka_adresow] PRIMARY KEY CLUSTERED ([idAdresu] ASC)
);

CREATE TABLE [dbo].[Pracownicy] (
    [idPracownika] INT          IDENTITY (1, 1) NOT NULL,
    [Imie]         VARCHAR (45) NOT NULL,
    [Nazwisko]     VARCHAR (45) NOT NULL,
    [Wiek]         INT          NOT NULL,
    [Login]        VARCHAR (45) NOT NULL,
    [Haslo]        VARCHAR (45) NOT NULL,
    [Sudo]         INT          NOT NULL,
    [idAdresu]     INT          NOT NULL,
    CONSTRAINT [PK_Pracownicy] PRIMARY KEY CLUSTERED ([idPracownika] ASC),
    CONSTRAINT [FK_Pracownicy_To_Ksiazka_adresow] FOREIGN KEY ([idAdresu]) REFERENCES [dbo].[Ksiazka_adresow] ([idAdresu])
);

CREATE TABLE [dbo].[Transakcje] (
    [idTransakcji] INT      IDENTITY (1, 1) NOT NULL,
    [Data]         DATETIME NOT NULL,
    [idKlienta]    INT      NOT NULL,
    [idPracownika] INT      NOT NULL,
    [idDostawcy]   INT      NOT NULL,
    CONSTRAINT [PK_Transakcje] PRIMARY KEY CLUSTERED ([idTransakcji] ASC),
    CONSTRAINT [FK_Transakcje_To_Dostawcy] FOREIGN KEY ([idDostawcy]) REFERENCES [dbo].[Dostawcy] ([idDostawcy]),
    CONSTRAINT [FK_Transakcje_To_Klienci] FOREIGN KEY ([idKlienta]) REFERENCES [dbo].[Klienci] ([idKlienta]),
    CONSTRAINT [FK_Transakcje_To_Pracownicy] FOREIGN KEY ([idPracownika]) REFERENCES [dbo].[Pracownicy] ([idPracownika])
);

